<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="-1" />
    <meta http-equiv="Cache-Control" content="no-cache" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google" content="notranslate" />

    <title>My Editor</title>
    <link rel="shortcut icon" href="#" type="image/x-icon">

    <link rel="stylesheet" href="dist/myeditor.css">
</head>

<style>
    body {
        margin: 0;
        padding: 0;
    }

    /*
         Need js for custom resize handle??? :
         https://spin.atomicobject.com/2019/11/21/creating-a-resizable-html-element
         */
    #editor {
        height: 60vh;
        resize: vertical;
        overflow: hidden;
        border: 1px solid silver;
    }

    editor-other {
        height: 40vh;
    }
</style>

<body>
    <p>
    <h2>Editor in shadow DOM</h2>
    </p>

    <div id="buttons">
        <button type="button" onclick="printHTML()">Print HTML to dev console</button>|
        <button type="button" onclick="clearContent()">Clear content</button>|
    </div>
    <div id="editor"></div>

    <p>
    <h2>Editor in DOM</h2>
    </p>

    <div>
        <editor-other id="editor2-1" data-idx="1"></editor-other>
    </div>

</body>

<!-- Comment modification editor -->
<template id="editor2-template">
    <link rel="stylesheet" href="dist/myeditor.css">
    <script src="dist/myeditor.js"></script>

    <div class="editor2-container">
        <div id="editor2"></div>
    </div>

    <style>
        #editor2 {
            height: 30vh;
            resize: vertical;
            /* overflow: auto; */
            overflow: hidden;

            border: 1px solid silver;
        }
    </style>
</template>
<!-- Comment modification editor -->

<script>"use strict";</script>
<script src="dist/myeditor.js"></script>

<script>
    const data = `
    <h2>Hello PromiseMirror</h2>
    <p>
        A ProseMirror document is based on a schema, which determines the
        kind of elements that may occur in it, and the relation they have to
        each other. This one is based on the basic schema, with lists and
        tables added. It allows the usual <strong>strong</strong>
        and <em>emphasized</em> text, <code>code font</code>,
        and <a href="http://marijnhaverbeke.nl">links</a>.
    </p>

    <p>
        <iframe video-type="youtube" src="https://player.vimeo.com/video/302637099" width="420" height="315" title="Youtube video" class="video"></iframe>
    </p>
    <p>
        <iframe video-type="youtube" src="https://youtube.com/embed/ce1xmzKAYPA?si=D2VlBCHbYtcfGglN&amp;start=81" width="420" height="315" title="Youtube video" class="video"></iframe>
    </p>
    <p>
        <iframe video-type="youtube" src="https://www.dailymotion.com/embed/video/x7ydf9r" width="420" height="315" title="Youtube video" class="video"></iframe>
    </p>

    <p>This paragraph has<br>a hard break inside of it.</p>

    <table>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
        </tr>
    </table>

    <iframe width="560" height="315" src="https://www.youtube.com/embed/ZUNaYWkFcuw" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    `;
    // const data = "hello"

    const options = {
        uploadActionURI: "http://localhost:8864/upload",
        uploadAccessURI: "http://localhost:8864/files",
    }
    const editorEL = document.querySelector("#editor")
    const editor = new MyEditor(data, editorEL, options)


    class modifierElement extends HTMLElement {
        constructor() {
            super()
            const templateContent = document.querySelector("#editor2-template").content
            const shadowRoot = this.attachShadow({ mode: "open" })
            shadowRoot.appendChild(templateContent.cloneNode(true))
        }
    }
    customElements.define("editor-other", modifierElement)

    const editor2ROOT = document.querySelector(`editor-other#editor2-1`).shadowRoot
    const editContent = "world"

    const editor2EL = editor2ROOT.querySelector("#editor2")
    const editor2Options = {
        uploadActionURI: "/api/uploader",
        uploadAccessURI: "/upload",
    }
    commentModifier = new MyEditor(editContent, editor2EL, editor2Options)


    function printHTML() { console.log(editor.getHTML()) }
    function clearContent() { editor.setHTML("") }

    document.addEventListener("DOMContentLoaded", async () => { })
</script>

</html>